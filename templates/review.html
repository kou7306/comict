{% extends "base.html" %} {% block extra_css %} 
<link href="../static/css/review.css" rel="stylesheet">
{% endblock %} {% block content%}

<main class="mb-12 mx-auto px-12 py-12 bg-gray-800 w-3/4">
    <!-- 本文スタート -->
  <!-- レビュー記録フォーム -->
    <form action="/{{user_id}}/review" method="POST">
        <div class="w-3/4 mx-auto">
            <div class="text-4xl text-center mb-12"><h1>レビュー投稿</h1></div>
            <div class="mb-8">
              <label for="work" class="text-2xl">作品名</label>
              <div class="">
                
                <input type="text" name="work_name" id="searchInput" class="w-full mt-2 h-12 text-black" placeholder="作品名" onblur="search()" required>
                
                <div id="loadingIndicator">検索中...</div>
                
              </div>
          </div>
            <div class="row mb-8">
                <label for="" class="text-2xl">評価</label>
                <div class="mt-2">
                    <i class="fa-solid fa-star fa-2x" style="color:gray" id="starbutton_1" onclick="star_update(1)"></i>
                    <i class="fa-solid fa-star fa-2x" style="color:gray" id="starbutton_2" onclick="star_update(2)"></i>
                    <i class="fa-solid fa-star fa-2x" style="color:gray" id="starbutton_3" onclick="star_update(3)"></i>
                    <i class="fa-solid fa-star fa-2x" style="color:gray" id="starbutton_4" onclick="star_update(4)"></i>
                    <i class="fa-solid fa-star fa-2x" style="color:gray" id="starbutton_5" onclick="star_update(5)"></i>
                </div>
            </div>
                <!-- 隠しフィールド -->
            <input type="hidden" name="rating" id="rating_input" value="0">
            <div class="">
                <label for="comment" class="text-2xl">コメント</label>
                <div class="w-full mt-2">
                    <textarea name="comment_text" id="comment" rows="5" class="w-full text-black"></textarea>
                  </div>
                  
            </div>
            <div class="text-center mt-8">
                <input type="submit" value="投稿" class="bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600 my-4 w-3/12" onclick="test()" id="submitbutton">
            </div>
              
        </div>
    </form>
</main>
<section id="review" class="mb-12 mx-auto px-12 py-12 bg-gray-800 w-3/4">
    <h2 class="text-3xl">レビュー一覧</h2>
    <form method="get">
      <select name="sort_option" onchange="this.form.submit()">
          <option value="evaluation_desc" {{ 'selected' if sort_option == 'evaluation_desc' else '' }}>評価の高い順</option>
          <option value="evaluation_asc" {{ 'selected' if sort_option == 'evaluation_asc' else '' }}>評価の低い順</option>
          <option value="newest" {{ 'selected' if sort_option == 'newest' else '' }}>新しい順</option>
          <option value="oldest" {{ 'selected' if sort_option == 'oldest' else '' }}>古い順</option>
      </select>
  </form>
    <ul>
      {% for review in reviews %}
      <li class="my-4 p-4 bg-gray-700">
        <a href="/{{ user_id }}/{{ review.get("mangaTitle") }}/detail" class="hover:text-blue-500">
          タイトル：{{ review.get("mangaTitle") }}
        </a>
        <p>{{ review.get("username") }}</p>
        <p>評価：{{ review.get("evaluation") }}</p>
        <p>{{ review.get("contents") }}</p>
      </li>
      {% endfor %}
  </ul>
</section>



    <!-- スクリプト読み込み -->
    <!-- ★の表示 -->
    <script src="https://kit.fontawesome.com/12a4c3ee6d.js" crossorigin="anonymous"></script>
    <!-- ★の切り替え -->
    <script src="../static/javascript/review.js"></script>
    

{% endblock %}