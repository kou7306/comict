
{% extends "base.html" %} {% block extra_css %} 


{% endblock %} {% block content%}





  <div class="mx-20">
    <h1>ユーザー詳細ページ</h1>

    {% if logged_in %}
    

    <section class="my-20" id="user">
        <h2 class="text-3xl">あなたの属性に近いユーザー</h2>
        <ul data-tg-order='2' data-tg-tour='あなたのアンケートの回答と似ているユーザーです。' class="flex flex-wrap list-none">
          {% if user_query != None %}
          {% for id in user_query %}
          {% if user_doc_ref.document(id).get().to_dict()["username"] != username %}
          <li class="w-2/12 text-center box-border m-2">

            <img src="https://kotonohaworks.com/free-icons/wp-content/uploads/kkrn_icon_user_1.png">
            <div>
              <a href="/{{id}}/userpage" class="text-white hover:text-blue-500">{{user_doc_ref.document(id).get().to_dict()["username"]}}</a>


          </div>    
          </li>
      
        {% endif %}
          {% endfor %}
          {% endif %}
        
      </ul>
    </section>

    <section class="my-20" id="reviewer">
        <h2 class="text-3xl" >フォローしたユーザー</h2>
        <ul class="flex flex-wrap list-none">
          
          {% for follow in follow_data %}
          <li class="w-2/12 text-center box-border m-2">
          <img src="https://kotonohaworks.com/free-icons/wp-content/uploads/kkrn_icon_user_1.png">
          <div>
            <a href="/{{follow[1]}}/userpage" class="hover:text-blue-500">{{follow[0]}}</a>
            
          </div>    
        </li>
          {% endfor %}
   
      </ul>
    </section>
{% endif %}

<section class="w-full my-8">
  <h2 class="text-3xl">ユーザー一覧</h2>
  <form method="get">
    <select name="sort_option" onchange="this.form.submit()" class="text-black">
        <option value="all_review" {{ 'selected' if sort_option == 'all_review' else '' }}>レビュー投稿が多い順</option>
        <option value="oneweek_review" {{ 'selected' if sort_option == 'oneweek_review' else '' }}>最近レビュー投稿が多い順</option>
        <option value="follow" {{ 'selected' if sort_option == 'follow' else '' }}>フォロワーが多い順</option>
    </select>
</form>
  <ul>
    {% if sort_user != [] %}
    {% for id in sort_user %}
    {% if user_doc_ref.document(id).get().to_dict()["username"] != username %}
    <li class="w-2/12 text-center box-border m-2">

      <img src="https://kotonohaworks.com/free-icons/wp-content/uploads/kkrn_icon_user_1.png">
      <div>
        <a href="/{{id}}/userpage" class="text-white hover:text-blue-500">{{user_doc_ref.document(id).get().to_dict()["username"]}}</a>


    </div>    
    </li>

  {% endif %}
    {% endfor %}
    {% endif %}
</ul>
</section>
  </div>


{% endblock %}

